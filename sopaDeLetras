#include <stdio.h>
#include <stdlib.h>
#include <stdbool.h>
#include <time.h>
#include <unistd.h>
#include <sys/stat.h>


struct pals{
    int largo;
    char escribe[10];
    char direcion; // h, v, d, D
    //bool select = 0;
    //bool hover = 0;
};

void sinPalabras(); // si no hay palabras en palabras.txt
void cuentaPalabras(); // cuenta palabras regresa nPalabras
//void creaSopa(pals palabras); // pone las palabras en la sopa
void dibujaSopa();  //dibuja la sopa inicial

void mSopa(); // modifica la sopa en base a las acciones del usuario
void step(); // usuario se mueve con las flechas y selecciona con espacio
void mueveP(); // mueve la posicion de el usuario
void seleccion(); // checa si la palabra seleccionada es correcta

void dibujaUI(); // dibuja el UI inicial
void mUI(); // modifica el UI
void pause(); // pausa el juego

void dibujaMenuP(); // dibuja el menu principal
void mMenuP(); // modifica el menu principal

int main() {
    int size = 18;
    int tabla[size][size];
    int nPalabras = -1;

    FILE *fptr;

    if(access("palabras.txt", F_OK) != 0) {
        sinPalabras();
    }

    fptr = fopen("palabras.txt", "r");

    //cuenta cuantas palabras hay
    char c;
    for (c = getc(fptr); c != EOF; c = getc(fptr)) {
        if (c == '\n') {
            nPalabras = nPalabras + 1;
        }
    }
    fclose(fptr);

    printf("%d\n",nPalabras);



    struct pals palabras[nPalabras];

    int foo, large = 0;
    char bar[10];

    c = '\0';
    fptr = fopen("palabras.txt", "r");

    for (c = getc(fptr); c != EOF; c = getc(fptr)) {
        if (c == '\n') {
            printf(" %s ", bar);
            palabras[foo].largo = large;
            large = 0;
            strcpy(palabras[foo].escribe, bar);
            memset(bar, '\0', 10);
        } else {
            bar[large] = c;
            large += 1;
            printf("%d", large);
        }
    }
}

void sinPalabras() {
    FILE *fptr;
    fptr = fopen("palabras.txt", "w");

    fprintf(fptr, "%s", "qUESo\n");
    fprintf(fptr, "%s", "eSNUPi\n");
    fprintf(fptr, "%s", "pELICULAs\n");
    fprintf(fptr, "%s", "aSTRONAUTa\n");
    fprintf(fptr, "%s", "cALZOn\n");
    fprintf(fptr, "%s", "hIGo\n");

    fclose(fptr);
}
